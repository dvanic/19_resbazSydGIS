## Explore and Plot by Shapefile Attributes

```{r reloadData, echo=F}
library(sf)
library(tidyverse)
theme_set(theme_minimal())
aoi_boundary_HARV <- st_read("data/NEON-DS-Site-Layout-Files/HARV/HarClip_UTMZ18.shp")
lines_HARV <- st_read("data/NEON-DS-Site-Layout-Files/HARV/HARV_roads.shp")
point_HARV <- st_read("data/NEON-DS-Site-Layout-Files/HARV/HARVtower_UTM18N.shp")
```

We can use the "usual" R ncol and dim functions from R to look at our objects:

```{r}
dim(lines_HARV)
lines_HARV %>% head()
ncol(point_HARV)
```

```{r ch2}
# Explore the attributes associated with the point_HARV and aoi_boundary_HARV spatial objects.
# 
#     How many attributes does each have?
#     Who owns the site in the point_HARV data object?
# 
#     Which of the following is NOT an attribute of the point_HARV data object?
# 
#     A) Latitude B) County C) Country
# 
```

Because this is R, we can use standard R operations to access specific columns of the sf dataframe:

```{r standardOps}
lines_HARV$TYPE
levels(lines_HARV$TYPE)

```
Furthermore, we can use dplyr commands to work with our object just like a dataframe - because that's what it is:

```{r}
class(lines_HARV)
```

Let's plot only the footpaths:

```{r}
lines_HARV %>%   ggplot() + geom_sf() 

lines_HARV %>% 
  filter(TYPE == "footpath") %>% 
  ggplot() + geom_sf() 
```

Now let's plot all of the different road types, colouring them in by type, and using linetype to indicate whether or not only bicycles and horses are allowed on them

```{r}
# First, how many road types are there?
levels(lines_HARV$TYPE)
# Bicycles/horses
levels(lines_HARV$BicyclesHo)


#lines_removeNA <- lines_HARV[!is.na(lines_HARV$BicyclesHo),]
#put in pull request

# let's build up the ggplot
lines_HARV %>%
  mutate(BicyclesHo = replace_na(BicyclesHo, "Unknown")) %>%
  mutate(BikeHorse = BicyclesHo != "Bicycles and Horses Allowed") %>%
  ggplot(aes( col=TYPE,lty = BikeHorse)) + geom_sf()
```

